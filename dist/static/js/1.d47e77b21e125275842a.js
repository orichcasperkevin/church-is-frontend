webpackJsonp([1],{lUoo:function(e,s){},zoB0:function(e,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=n("YaEn"),r={name:"credentialsReset",data:function(){return{username:this.$session.get("username"),changing_password:!0,old_password:null,new_password:null,new_password_confirmation:null,password_errors:[],debouncing_timeout:null,password:null,new_username:null,new_username_confirmation:null,username_errors:[]}},created:function(){},watch:{changing_password:function(){this.changing_password?(document.getElementById("change_username_button").classList.add("text-primary"),document.getElementById("change_password_button").classList.remove("text-primary")):(document.getElementById("change_password_button").classList.add("text-primary"),document.getElementById("change_username_button").classList.remove("text-primary"))},new_username:function(){var e=this;clearTimeout(this.debouncing_timeout),this.debouncing_timeout=setTimeout(function(){e.username_errors=[],0!=e.new_username.length?(e.new_username.length<5&&e.username_errors.push("too short"),1!=e.new_username.split(" ").length&&e.username_errors.push("remove spaces"),e.new_username.length>=5&&1==e.new_username.split(" ").length&&e.checkIfUsernameIsAvailable()):e.new_username=null},500)},new_username_confirmation:function(){var e=this;clearTimeout(this.debouncing_timeout),this.debouncing_timeout=setTimeout(function(){e.username_errors=[],0==e.username_errors.length&&e.new_username!=e.new_username_confirmation&&e.username_errors.push("confirmation did not match username")},500)},new_password:function(){var e=this;clearTimeout(this.debouncing_timeout),this.debouncing_timeout=setTimeout(function(){e.password_errors=[],0!=e.new_password.length?(e.new_password.length<5&&e.password_errors.push("too short"),1!=e.new_password.split(" ").length&&e.password_errors.push("remove spaces")):e.new_password=null},500)},new_password_confirmation:function(){var e=this;clearTimeout(this.debouncing_timeout),this.debouncing_timeout=setTimeout(function(){e.password_errors=[],0==e.password_errors.length&&e.new_password!=e.new_password_confirmation&&e.password_errors.push("confirmation did not match password")},500)}},methods:{checkIfUsernameIsAvailable:function(){var e=this;this.$http({method:"post",url:this.$BASE_URL+"/api/members/check-if-username-is-taken/",data:{username:this.new_username}}).then(function(){e.username_errors=[]}).catch(function(s){e.username_errors.push("username taken")})},changeUsername:function(){this.$http({method:"post",url:this.$BASE_URL+"/api/members/change-credentials/",data:{old_password:this.password,new_password:null,old_username:this.username,new_username:this.new_username}}).then(function(){alert("username changed successfully"),t.a.push("/login")}).catch(function(e){alert("could not verify you. enter correct password")})},changePassword:function(){this.$http({method:"post",url:this.$BASE_URL+"/api/members/change-credentials/",data:{old_password:this.password,new_password:this.new_password,old_username:this.username,new_username:null}}).then(function(){alert("password changed successfully"),t.a.push("/login")}).catch(function(e){alert("could not verify you. your old password was incorrect")})}}},a={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"continer"},[t("div",{staticClass:"d-flex justify-content-center"},[t("div",{staticClass:"card w-400 border-0",staticStyle:{"background-color":"ghostwhite",height:"80vh","min-width":"300px"}},[t("div",{staticClass:"card-header text-center border-0"},["my-domain"==e.$host_name||"anvilchurch"==e.$host_name?t("img",{staticClass:"mr-0 ",staticStyle:{width:"50px",height:"auto"},attrs:{src:n("IBkg")}}):e._e(),e._v(" "),"methodistkenya"==e.$host_name?t("img",{staticClass:"ml-4 ",staticStyle:{width:"100px",height:"auto","border-radius":"5px"},attrs:{src:n("i1S/"),alt:"logo not found"}}):e._e(),e._v(" "),t("small",{staticClass:"d-flex justify-content-center"},[e._v("change credentials for")]),e._v(" "),t("p",[e._v("                        \n                    "+e._s(e.username)+"\n                ")])]),e._v(" "),t("div",{staticClass:"card-body"},[t("div",{staticClass:"d-flex justify-content-center text-muted"},[t("small",{staticStyle:{cursor:"pointer"},attrs:{id:"change_password_button"},on:{click:function(s){e.changing_password=!0}}},[e._v("\n                        change password\n                    ")]),e._v(" "),t("span",{staticClass:"ml-2 mr-2"},[e._v("|")]),e._v(" "),t("small",{staticClass:"text-primary",staticStyle:{cursor:"pointer"},attrs:{id:"change_username_button"},on:{click:function(s){e.changing_password=!1}}},[e._v("                                \n                        change username\n                    ")])]),e._v(" "),e.changing_password?t("form",[t("div",{staticClass:"mt-4 mb-5 form-group"},[t("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Old password")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"your old password"},domProps:{value:e.password},on:{input:function(s){s.target.composing||(e.password=s.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputPassword1"}},[e._v("New password")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.new_password,expression:"new_password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"your new password"},domProps:{value:e.new_password},on:{input:function(s){s.target.composing||(e.new_password=s.target.value)}}}),e._v(" "),e.password_errors.length?t("ul",e._l(e.password_errors,function(s){return t("li",{staticClass:"text-danger"},[t("small",[e._v(e._s(s))])])}),0):e._e()]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Confirm new password")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.new_password_confirmation,expression:"new_password_confirmation"}],staticClass:"form-control",attrs:{type:"password",placeholder:"confirm new password"},domProps:{value:e.new_password_confirmation},on:{input:function(s){s.target.composing||(e.new_password_confirmation=s.target.value)}}})]),e._v(" "),0==e.username_errors.length&&null!=e.password&&null!=e.new_password&&null!=e.new_password_confirmation&&e.new_password==e.new_password_confirmation?t("button",{staticClass:"mt-5 btn btn-block btn-success",on:{click:function(s){return e.changePassword()}}},[e._v("\n                        change password\n                    ")]):t("button",{staticClass:"mt-5 btn btn-block btn-success",attrs:{disabled:""}},[e._v("\n                        change password\n                    ")])]):e._e(),e._v(" "),e.changing_password?e._e():t("form",[t("div",{staticClass:"mt-4 mb-5 form-group"},[t("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Password")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1",placeholder:"your password"},domProps:{value:e.password},on:{input:function(s){s.target.composing||(e.password=s.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",[e._v("New username")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.new_username,expression:"new_username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"your new username"},domProps:{value:e.new_username},on:{input:function(s){s.target.composing||(e.new_username=s.target.value)}}}),e._v(" "),e.username_errors.length?t("ul",e._l(e.username_errors,function(s){return t("li",{staticClass:"text-danger"},[t("small",[e._v(e._s(s))])])}),0):e._e()]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",[e._v("Confirm new username")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.new_username_confirmation,expression:"new_username_confirmation"}],staticClass:"form-control",attrs:{type:"text",placeholder:"confirm your new username"},domProps:{value:e.new_username_confirmation},on:{input:function(s){s.target.composing||(e.new_username_confirmation=s.target.value)}}})]),e._v(" "),0==e.username_errors.length&&null!=e.password&&null!=e.new_username&&null!=e.new_username_confirmation&&e.new_username==e.new_username_confirmation?t("button",{staticClass:"mt-5 btn btn-block btn-success",on:{click:function(s){return e.changeUsername()}}},[e._v("\n                        change username\n                    ")]):t("button",{staticClass:"mt-5 btn btn-block btn-success",attrs:{disabled:""}},[e._v("\n                        change username\n                    ")])])])])])])])},staticRenderFns:[]};var o=n("VU/8")(r,a,!1,function(e){n("lUoo")},null,null);s.default=o.exports}});
//# sourceMappingURL=1.d47e77b21e125275842a.js.map