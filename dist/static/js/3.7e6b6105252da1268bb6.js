webpackJsonp([3],{Gmit:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"smsAnalytics",data:function(){return{news:null,adding_news_article:!1,news_article:null,news_title:null,news_author:null}},created:function(){this.getNews()},methods:{getNews:function(){var t=this;this.$store.dispatch("update_isLoading",!0),this.$http.get(this.$BASE_URL+"/api/news/recent-news/").then(function(e){t.news=e.data,t.$store.dispatch("update_isLoading",!1),setTimeout(function(){t.parseNewsArticles()},3e3)}).catch(function(e){t.$store.dispatch("update_isLoading",!1),alert("error occured while fetching data:"+e)})},parseNewsArticles:function(){for(var t in this.news){var e=document.getElementById("article_"+this.news[t].id),a=document.createElement("div"),s=this.news[t].article;a.innerHTML=s,e.appendChild(a);var i=e.getElementsByTagName("img");for(var n in i){var l=i[n];l instanceof HTMLElement&&l.classList.add("image-fit")}}},addNewsArticle:function(){var t=this;this.adding_news_article=!0,this.$http.post(this.$BASE_URL+"/api/news/add-news/",{heading:this.news_title,article:this.news_article,author:this.news_author}).then(function(){t.adding_news_article=!1,t.news_article=null,t.news_author=null,t.news_title=null,t.getNews()}).catch(function(e){t.adding_news_article=!1,t.news_article=null,t.news_author=null,t.news_title=null,alert("an error occured :"+e)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"continer",attrs:{"aria-label":"breadcrumb"}},[a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item"},[a("span",{staticClass:"backButton"},[a("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:{name:"Home"}}},[t._v("Home")])],1)]),a("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("news & announcements")])])]),t._v(" "),a("div",{staticClass:"continer"},[t._m(0),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[a("section",{staticClass:"col"}),t._v(" "),a("section",{staticClass:"col-lg-9"},[a("article",{attrs:{id:"news"}},[a("div",{staticClass:"row"},[t.news?a("div",{staticClass:"col-lg-12 "},t._l(t.news,function(e){return a("div",{staticClass:"border border-light shadow p-2 mb-2 bg-white rounded"},[a("i",{staticClass:"text-primary font-weight-bold"},[t._v(t._s(e.author))]),t._v(" "),a("p",{staticClass:"lead"},[t._v(t._s(e.heading))]),t._v(" "),a("article",{attrs:{id:"article_"+e.id}}),t._v(" "),a("p",[a("i",[t._v(t._s(t.$humanizeDate(e.date)))])])])}),0):a("div",{staticClass:"col text-center text-muted"},[a("h3",[t._v("Oops!")]),t._v(" "),a("h3",[t._v("news articles not found")]),t._v(" "),a("p",[t._v("add news articles to have content here")])])])])]),t._v(" "),t._m(1)])]),t._v(" "),a("section",[a("div",{staticClass:"modal fade",attrs:{id:"addNewsModal",tabindex:"-1",role:"dialog","aria-labelledby":"addNewsModal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),a("div",{staticClass:"modal-body"},[a("label",{staticClass:"font-weight-bold"},[t._v("heading / title")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.news_title,expression:"news_title"}],staticClass:"mb-4 form-control",attrs:{maxlength:"100",type:"text",placeholder:"A catchy title for your article"},domProps:{value:t.news_title},on:{input:function(e){e.target.composing||(t.news_title=e.target.value)}}}),t._v(" "),a("label",{staticClass:"font-weight-bold"},[t._v("article")]),t._v(" "),a("quill-editor",{staticClass:"mb-4",model:{value:t.news_article,callback:function(e){t.news_article=e},expression:"news_article"}}),t._v(" "),a("label",{staticClass:"font-weight-bold"},[t._v("author")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.news_author,expression:"news_author"}],staticClass:"mb-4 form-control",attrs:{maxlength:"100",type:"text",placeholder:"eg. John Doe, Church Pastor "},domProps:{value:t.news_author},on:{input:function(e){e.target.composing||(t.news_author=e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.addNewsArticle()}}},[t._v("\n                        add article\n                        "),t.adding_news_article?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e()])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("h3",{staticClass:"col-6"},[this._v("              \n                News and announcements\n            ")]),this._v(" "),e("div",{staticClass:"col-6 btn-group d-sm-block d-md-none text-right"},[e("div",{staticStyle:{padding:"0px 0px 25px 10px"}},[e("button",{staticClass:"btn btn-success",attrs:{"data-toggle":"modal","data-target":"#addNewsModal"}},[e("b",[this._v("+")]),this._v(" add          \n                            ")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"col-lg-2"},[e("button",{staticClass:"btn btn-success",attrs:{"data-toggle":"modal","data-target":"#addNewsModal"}},[this._v("\n                    + Add \n                ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[this._v("Add news or announcement")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("Ã—")])])])}]};var n=a("VU/8")(s,i,!1,function(t){a("PN4v")},null,null);e.default=n.exports},PN4v:function(t,e){}});
//# sourceMappingURL=3.7e6b6105252da1268bb6.js.map